<html>
<script>

var leaderPosition = 0;
const distance = 20;

// En funktion (constructor) som är till för att skapa hästar.
function Racehorse(number) {
  this.number = number;
  this.position = 0;
}

// Skapa fyra hästar (objekt från constructorn Racehorse)
/*var horse1 = new Racehorse(1);
var horse2 = new Racehorse(2);
var horse3 = new Racehorse(3);
var horse4 = new Racehorse(4);
*/

//Åsa Ps variant
var allHorses = [];
createRacehorses(50);
function createRacehorses(horse) {
  for (let i=0; i < horse; i++) {
    allHorses.push(new Racehorse(i+1));
  }
}
/*
// Linneas variant
function createHorses(num) {
  var horses = [];
  for (let i=0; i < num; i++) {
    var horse = new Racehorse(i+1);
    horses.push(horse);
  }
  return horses;
}
// Skapa ett stall med hästar
var allHorses = createHorses(3);
*/
function moveHorses() {

  allHorses.forEach(function(horse){
    let slump = Math.floor(Math.random() * 3);
    horse.position += slump;
  });

}

// Kontrollera om någon har vunnit
while (leaderPosition < distance) {

  // Rulla bollarna i hål
  moveHorses();

  // Skriv ut hur hästarna ligger till.
  allHorses.forEach(function(horse){
    console.log("Häst " + horse.number + ":" + horse.position + "\n");
    if (horse.position > leaderPosition) {
      leaderPosition = horse.position;
    }
  });
}

// Sortera hästarna efter deras leaderPosition
allHorses.sort(function(a,b){
  if(a.position < b.position) return 1;
  if(a.position > b.position) return -1;
});

console.log("Vinnare blev häst nummer " + allHorses[0].number);

</script>
</html>
